OpenLayers.Format.WMSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wms:"http://www.opengis.net/wms",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"wms",read:function(c){if(typeof c=="string"){c=OpenLayers.Format.XML.prototype.read.apply(this,[c])}var b=c;if(c&&c.nodeType==9){c=c.documentElement}var a={};this.readNode(c,a);if(a.service===undefined){var d=new OpenLayers.Format.OGCExceptionReport();a.error=d.read(b)}return a},readers:{wms:{Service:function(a,b){b.service={};this.readChildNodes(a,b.service)},Name:function(a,b){b.name=this.getChildValue(a)},Title:function(a,b){b.title=this.getChildValue(a)},Abstract:function(a,b){b["abstract"]=this.getChildValue(a)},BoundingBox:function(b,c){var d={};d.bbox=[parseFloat(b.getAttribute("minx")),parseFloat(b.getAttribute("miny")),parseFloat(b.getAttribute("maxx")),parseFloat(b.getAttribute("maxy"))];var a={x:parseFloat(b.getAttribute("resx")),y:parseFloat(b.getAttribute("resy"))};if(!(isNaN(a.x)&&isNaN(a.y))){d.res=a}return d},OnlineResource:function(a,b){b.href=this.getAttributeNS(a,this.namespaces.xlink,"href")},ContactInformation:function(a,b){b.contactInformation={};this.readChildNodes(a,b.contactInformation)},ContactPersonPrimary:function(a,b){b.personPrimary={};this.readChildNodes(a,b.personPrimary)},ContactPerson:function(a,b){b.person=this.getChildValue(a)},ContactOrganization:function(a,b){b.organization=this.getChildValue(a)},ContactPosition:function(a,b){b.position=this.getChildValue(a)},ContactAddress:function(a,b){b.contactAddress={};this.readChildNodes(a,b.contactAddress)},AddressType:function(a,b){b.type=this.getChildValue(a)},Address:function(a,b){b.address=this.getChildValue(a)},City:function(a,b){b.city=this.getChildValue(a)},StateOrProvince:function(a,b){b.stateOrProvince=this.getChildValue(a)},PostCode:function(a,b){b.postcode=this.getChildValue(a)},Country:function(a,b){b.country=this.getChildValue(a)},ContactVoiceTelephone:function(a,b){b.phone=this.getChildValue(a)},ContactFacsimileTelephone:function(a,b){b.fax=this.getChildValue(a)},ContactElectronicMailAddress:function(a,b){b.email=this.getChildValue(a)},Fees:function(b,c){var a=this.getChildValue(b);if(a&&a.toLowerCase()!="none"){c.fees=a}},AccessConstraints:function(a,b){var c=this.getChildValue(a);if(c&&c.toLowerCase()!="none"){b.accessConstraints=c}},Capability:function(a,b){b.capability={nestedLayers:[],layers:[]};this.readChildNodes(a,b.capability)},Request:function(a,b){b.request={};this.readChildNodes(a,b.request)},GetCapabilities:function(a,b){b.getcapabilities={formats:[]};this.readChildNodes(a,b.getcapabilities)},Format:function(a,b){if(OpenLayers.Util.isArray(b.formats)){b.formats.push(this.getChildValue(a))}else{b.format=this.getChildValue(a)}},DCPType:function(a,b){this.readChildNodes(a,b)},HTTP:function(a,b){this.readChildNodes(a,b)},Get:function(a,b){b.get={};this.readChildNodes(a,b.get);if(!b.href){b.href=b.get.href}},Post:function(a,b){b.post={};this.readChildNodes(a,b.post);if(!b.href){b.href=b.get.href}},GetMap:function(a,b){b.getmap={formats:[]};this.readChildNodes(a,b.getmap)},GetFeatureInfo:function(a,b){b.getfeatureinfo={formats:[]};this.readChildNodes(a,b.getfeatureinfo)},Exception:function(a,b){b.exception={formats:[]};this.readChildNodes(a,b.exception)},Layer:function(c,i){var e,b;if(i.capability){b=i.capability;e=i}else{b=i}var q=c.getAttributeNode("queryable");var d=(q&&q.specified)?c.getAttribute("queryable"):null;q=c.getAttributeNode("cascaded");var m=(q&&q.specified)?c.getAttribute("cascaded"):null;q=c.getAttributeNode("opaque");var j=(q&&q.specified)?c.getAttribute("opaque"):null;var o=c.getAttribute("noSubsets");var a=c.getAttribute("fixedWidth");var l=c.getAttribute("fixedHeight");var p=e||{},n=OpenLayers.Util.extend;var k={nestedLayers:[],styles:e?[].concat(e.styles):[],srs:e?n({},p.srs):{},metadataURLs:[],bbox:e?n({},p.bbox):{},llbbox:p.llbbox,dimensions:e?n({},p.dimensions):{},authorityURLs:e?n({},p.authorityURLs):{},identifiers:{},keywords:[],queryable:(d&&d!=="")?(d==="1"||d==="true"):(p.queryable||false),cascaded:(m!==null)?parseInt(m):(p.cascaded||0),opaque:j?(j==="1"||j==="true"):(p.opaque||false),noSubsets:(o!==null)?(o==="1"||o==="true"):(p.noSubsets||false),fixedWidth:(a!=null)?parseInt(a):(p.fixedWidth||0),fixedHeight:(l!=null)?parseInt(l):(p.fixedHeight||0),minScale:p.minScale,maxScale:p.maxScale,attribution:p.attribution};i.nestedLayers.push(k);k.capability=b;this.readChildNodes(c,k);delete k.capability;if(k.name){var h=k.name.split(":"),g=b.request,f=g.getfeatureinfo;if(h.length>0){k.prefix=h[0]}b.layers.push(k);if(k.formats===undefined){k.formats=g.getmap.formats}if(k.infoFormats===undefined&&f){k.infoFormats=f.formats}}},Attribution:function(a,b){b.attribution={};this.readChildNodes(a,b.attribution)},LogoURL:function(a,b){b.logo={width:a.getAttribute("width"),height:a.getAttribute("height")};this.readChildNodes(a,b.logo)},Style:function(b,c){var a={};c.styles.push(a);this.readChildNodes(b,a)},LegendURL:function(b,c){var a={width:b.getAttribute("width"),height:b.getAttribute("height")};c.legend=a;this.readChildNodes(b,a)},MetadataURL:function(a,b){var c={type:a.getAttribute("type")};b.metadataURLs.push(c);this.readChildNodes(a,c)},DataURL:function(a,b){b.dataURL={};this.readChildNodes(a,b.dataURL)},FeatureListURL:function(a,b){b.featureListURL={};this.readChildNodes(a,b.featureListURL)},AuthorityURL:function(b,d){var a=b.getAttribute("name");var c={};this.readChildNodes(b,c);d.authorityURLs[a]=c.href},Identifier:function(a,c){var b=a.getAttribute("authority");c.identifiers[b]=this.getChildValue(a)},KeywordList:function(a,b){this.readChildNodes(a,b)},SRS:function(a,b){b.srs[this.getChildValue(a)]=true}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1"});